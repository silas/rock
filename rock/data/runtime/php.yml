env:
  PATH: "${PROJECT_PATH}/bin:${PROJECT_PATH}/vendor/bin:${PATH}"
  BUILD_PATH: "${PROJECT_PATH}/vendor"
  TEST_PATH: "${PROJECT_PATH}/tests"
  PHP_INI: "${PROJECT_PATH}"

build: |

  if [[ -f ./composer.json ]]; then
    composer.phar install
  else
    warn 'no "composer.json" file found'
  fi

build_deployment: |

  if [[ ! -f ./composer.lock ]]; then
    die 'no "composer.lock" file found'
  fi

  composer.phar install

test: |

  php -c ${PHP_INI} ${BUILD_PATH}/bin/phpunit

clean: |

  rm -fr ${BUILD_PATH}
